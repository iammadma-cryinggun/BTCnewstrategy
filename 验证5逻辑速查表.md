# 验证5逻辑速查表

**版本**: v3.0
**日期**: 2026-01-22

---

## 🎯 黄金点位（核心参数）

```python
# === 最重要（必须记住） ===
TENSION_THRESHOLD = 0.35     # 张力阈值 ⭐⭐⭐⭐⭐
ACCEL_THRESHOLD = 0.02       # 加速度阈值 ⭐⭐⭐⭐⭐

# === 重要 ===
OSCILLATION_BAND = 0.5       # 震荡带 ⭐⭐⭐⭐
CONFIDENCE_THRESHOLD = 0.6    # 置信度过滤 ⭐⭐⭐⭐

# === FFT ===
FFT_COMPONENTS = 8           # 保留前8个频率分量 ⭐⭐⭐⭐

# === DXY ===
DXY_FUEL_HIGH = 0.2          # 高燃料（增强信号）⭐⭐⭐
DXY_FUEL_MEDIUM = 0.1        # 中等燃料 ⭐⭐

# === 风险控制 ===
STOP_LOSS_PCT = 0.03         # 止损-3% ⭐⭐⭐⭐⭐
TAKE_PROFIT_PCT = 0.10       # 止盈+10% ⭐⭐⭐⭐⭐
RISK_PER_TRADE = 0.02        # 单笔风险2% ⭐⭐⭐⭐⭐
```

---

## 📊 信号判断速查

### 奇点看空（BEARISH_SINGULARITY）

**条件**：
```python
tension > 0.35 AND acceleration < -0.02
```

**动作**：**LONG（做多）**

**仓位**：
- 基础：100% - 115%
- DXY增强：+20%

**理由**：市场超买+动能衰竭 → 反向抄底

---

### 奇点看涨（BULLISH_SINGULARITY）

**条件**：
```python
tension < -0.35 AND acceleration > 0.02
```

**动作**：**SHORT（做空）**

**仓位**：
- 基础：100% - 118%
- DXY增强：+20%

**理由**：市场超卖+动能衰竭 → 反向逃顶

---

### 震荡（OSCILLATION）

**条件**：
```python
|tension| < 0.5 AND |acceleration| < 0.02
```

**动作**：**WAIT（观望）**

**理由**：市场震荡，无明确方向

---

### 高位震荡（HIGH_OSCILLATION）

**条件**：
```python
tension > 0.3 AND |acceleration| < 0.01
```

**动作**：**SHORT（做空）**

**仓位**：100%

**理由**：高位横盘，可能下跌

---

### 低位震荡（LOW_OSCILLATION）

**条件**：
```python
tension < -0.3 AND |acceleration| < 0.01
```

**动作**：**LONG（做多）**

**仓位**：100%

**理由**：低位横盘，可能上涨

---

## 🧮 核心公式

### 张力计算（验证5核心）

```python
# 步骤1：去趋势
d_prices = detrend(prices)

# 步骤2：FFT滤波（保留前8个频率分量）
coeffs = fft(d_prices)
coeffs[8:] = 0
filtered = ifft(coeffs).real

# 步骤3：Hilbert变换
analytic = hilbert(filtered)
tension = np.imag(analytic)

# 步骤4：标准化
norm_tension = (tension - mean(tension)) / std(tension)
```

### 加速度计算（验证5核心！）

```python
# 关键：加速度 = 张力的二阶差分
current_tension = norm_tension[-1]
prev_tension = norm_tension[-2]
prev2_tension = norm_tension[-3]

velocity = current_tension - prev_tension
acceleration = velocity - (prev_tension - prev2_tension)
            = current_tension - 2×prev_tension + prev2_tension
```

### DXY燃料计算

```python
# DXY燃料 = -DXY加速度 × 100
change_1 = (dxy[-1] - dxy[-2]) / dxy[-2]
change_2 = (dxy[-2] - dxy[-3]) / dxy[-3]
dxy_acceleration = change_1 - change_2
dxy_fuel = -dxy_acceleration × 100
```

### 仓位计算

```python
# 基础仓位
base_size = 1.0 + (confidence - 0.6) × 0.5

# DXY增强
if abs(dxy_fuel) > 0.2:
    base_size *= 1.2  # 增加20%

# 风险控制
max_position = account × (0.02 / 0.03) = account × 0.667
actual_position = min(strategy_position, max_position)
```

---

## 📋 决策矩阵（快速参考）

| 系统信号 | 我们的动作 | 基础仓位 | DXY增强 | 止损 | 止盈 |
|---------|-----------|---------|---------|------|------|
| BEARISH_SINGULARITY | **LONG** | 100-115% | +20% | -3% | +10% |
| BULLISH_SINGULARITY | **SHORT** | 100-118% | +20% | -3% | +10% |
| LOW_OSCILLATION | **LONG** | 100% | - | -3% | +10% |
| HIGH_OSCILLATION | **SHORT** | 100% | - | -3% | +10% |
| OSCILLATION | **WAIT** | 0% | - | - | - |
| TRANSITION | **WAIT** | 0% | - | - | - |

---

## 🎯 置信度等级

### BEARISH_SINGULARITY
- 0.9：强奇点看空（DXY燃料 > 0.1）
- 0.7：奇点看空（DXY燃料 <= 0.1）

### BULLISH_SINGULARITY
- 0.95：超强奇点看涨（DXY燃料 > 0.2）
- 0.8：强奇点看涨（0 < DXY燃料 <= 0.2）
- 0.6：奇点看涨（DXY燃料 <= 0）

### 其他
- OSCILLATION：0.8
- HIGH_OSCILLATION：0.6
- LOW_OSCILLATION：0.6
- TRANSITION：0.3-0.4

**阈值**：只交易 confidence >= 0.6 的信号

---

## 🚨 平仓条件

### 自动平仓

1. **止损触发**：盈亏 < -3%
2. **止盈触发**：盈亏 > +10%
3. **信号消失**：置信度 < 50%

### 手动平仓（可选）

- 持仓时间超过7天
- 市场出现重大新闻事件
- 系统切换到过渡状态

---

## 📈 数据要求

### 最小数据量

- BTC价格历史：至少60个4小时K线
- DXY历史：至少3个数据点

### 推荐数据量

- BTC价格历史：100个4小时K线（约16.7天）
- DXY历史：30个日度数据

---

## ⚙️ 系统配置

### 实盘交易

```python
system = LiveTradingSystem(
    account_balance=10000,      # 账户余额
    risk_per_trade=0.02,        # 单笔风险2%
    interval_seconds=300        # 每5分钟检查
)
```

### 数据收集

```python
collector = DataCollector(
    interval_hours=4            # 每4小时收集
)
```

---

## 🎓 核心原理（一句话）

**基于FFT滤波和Hilbert变换计算市场张力，通过二阶差分检测加速度突变（验证5核心），结合DXY燃料增强信号，采用V8.0反向策略在市场过度反应时进行逆向交易，止损3%、止盈10%，单笔风险控制在2%。**

---

## ✅ 检查清单

### 开仓前检查

- [ ] 张力是否达到阈值（|tension| > 0.35）
- [ ] 加速度是否达到阈值（|acceleration| > 0.02）
- [ ] 置信度是否足够（confidence >= 0.6）
- [ ] DXY燃料是否考虑
- [ ] 仓位是否在风险控制范围内（<= 66.7% account）
- [ ] 止损止盈是否设置正确

### 持仓中检查

- [ ] 当前盈亏（每5分钟）
- [ ] 是否触发止损（-3%）
- [ ] 是否触发止盈（+10%）
- [ ] 信号是否消失（confidence < 0.5）

---

**打印这个速查表，放在手边，随时参考！** 🎯
