# è®¢å•å¢™æ•°æ®å®æ—¶æ€§åˆ†æ

**æ—¥æœŸ**: 2026-01-23
**é—®é¢˜**: è®¢å•å¢™çš„æ¥å£æ˜¯å®æ—¶æ•°æ®å—ï¼Ÿ

---

## ğŸ“¡ Deribit APIçš„å®æ—¶æ€§

### APIç±»å‹: REST APIï¼ˆå®æ—¶è·å–ï¼‰

```python
# å½“å‰ä½¿ç”¨çš„æ–¹æ³•
url = "https://www.deribit.com/api/v2/public/get_book_summary_by_currency"
params = {'currency': 'BTC', 'kind': 'option'}
response = requests.get(url, params=params)
```

**å…³é”®ç‰¹ç‚¹**:
- âœ… **æ¯æ¬¡è°ƒç”¨éƒ½è¿”å›æœ€æ–°æ•°æ®**
- âœ… **æ•°æ®æ¥æºæ˜¯Deribitäº¤æ˜“æ‰€çš„å®æ—¶æ•°æ®åº“**
- âœ… **åŒ…æ‹¬å®æ—¶OIï¼ˆæœªå¹³ä»“åˆçº¦ï¼‰ã€Greeksã€ä»·æ ¼ç­‰**

### APIæ›´æ–°é¢‘ç‡

**Deribitå®˜æ–¹æ–‡æ¡£è¯´æ˜**:
- **å…¬å…±API**: æ— é€Ÿç‡é™åˆ¶ï¼ˆåˆç†ä½¿ç”¨èŒƒå›´å†…ï¼‰
- **æ•°æ®å»¶è¿Ÿ**: é€šå¸¸ < 100ms
- **å»ºè®®é¢‘ç‡**: å¯ä»¥æ¯ç§’è°ƒç”¨å¤šæ¬¡

---

## ğŸ• å½“å‰ç³»ç»Ÿçš„æ›´æ–°ç­–ç•¥

### å½“å‰å®ç°

```python
# main_v80_enhanced.py Line 23
self.options_update_interval = 3600  # æ¯å°æ—¶æ›´æ–°ä¸€æ¬¡æœŸæƒæ•°æ®
```

### æ›´æ–°æ—¶æœº

1. **ç³»ç»Ÿå¯åŠ¨æ—¶**: å¼ºåˆ¶æ›´æ–°1æ¬¡
2. **ä¿¡å·æ£€æŸ¥æ—¶**: æ¯4å°æ—¶ï¼ˆä¸å¼ºåˆ¶æ›´æ–°ï¼Œä½¿ç”¨ç¼“å­˜ï¼‰
3. **æ¯å°æ—¶æ•´ç‚¹**: å¼ºåˆ¶æ›´æ–°1æ¬¡

### æ—¶é—´çº¿ç¤ºä¾‹

```
00:00 - ç³»ç»Ÿå¯åŠ¨ â†’ è·å–æœŸæƒæ•°æ®ï¼ˆæœ€æ–°ï¼‰
00:05 - ä¿¡å·æ£€æŸ¥ â†’ ä½¿ç”¨ç¼“å­˜æ•°æ®ï¼ˆ5åˆ†é’Ÿå‰ï¼‰
01:00 - æ•´ç‚¹æ›´æ–° â†’ è·å–æœŸæƒæ•°æ®ï¼ˆæœ€æ–°ï¼‰
04:00 - ä¿¡å·æ£€æŸ¥ â†’ ä½¿ç”¨ç¼“å­˜æ•°æ®ï¼ˆ3å°æ—¶å‰ï¼‰âš ï¸
04:05 - ä¿¡å·æ£€æŸ¥ â†’ ä½¿ç”¨ç¼“å­˜æ•°æ®ï¼ˆ3å°æ—¶å‰ï¼‰âš ï¸
```

---

## ğŸ” è®¢å•å¢™æ•°æ®çš„ç‰¹ç‚¹

### è®¢å•å¢™æ˜¯ä»€ä¹ˆï¼Ÿ

è®¢å•å¢™ = å¤§é¢æœªå¹³ä»“åˆçº¦ï¼ˆOIï¼‰é›†ä¸­çš„è¡Œæƒä»·

**ç¤ºä¾‹**:
```
CALL $100,000 - 226 BTC (æœªå¹³ä»“åˆçº¦)
PUT $90,000 - 127 BTC (æœªå¹³ä»“åˆçº¦)
```

### OIï¼ˆæœªå¹³ä»“åˆçº¦ï¼‰çš„å˜åŒ–é€Ÿåº¦

**æ…¢é€Ÿå˜åŒ–**:
- OIä¸ä¼šç¬é—´æ¶ˆå¤±æˆ–å‡ºç°
- å¤§éƒ¨åˆ†æ—¶æœŸï¼ŒOIå˜åŒ–ç›¸å¯¹ç¼“æ…¢
- è®¢å•å¢™ä½ç½®ç›¸å¯¹ç¨³å®š

**å¿«é€Ÿå˜åŒ–æ—¶æœŸ**:
- åˆ°æœŸæ—¥å‰1-2å‘¨ï¼šOIå¼€å§‹åŠ é€Ÿè½¬ç§»
- å¸‚åœºå‰§çƒˆæ³¢åŠ¨æ—¶ï¼šäº¤æ˜“è€…å¹³ä»“æˆ–å¼€ä»“
- é‡å¤§æ–°é—»äº‹ä»¶å‰ï¼šOIå¿«é€Ÿè°ƒæ•´

---

## âš–ï¸ å®æ—¶æ€§ vs æ›´æ–°é¢‘ç‡

### å½“å‰ç­–ç•¥ï¼šæ¯å°æ—¶æ›´æ–°

**ä¼˜ç‚¹**:
- âœ… å‡å°‘APIè°ƒç”¨æ¬¡æ•°
- âœ… é™ä½ç³»ç»Ÿè´Ÿè½½
- âœ… è®¢å•å¢™ä½ç½®é€šå¸¸ç¨³å®š
- âœ… èŠ‚çœç½‘ç»œå¸¦å®½

**ç¼ºç‚¹**:
- âŒ å¯èƒ½é”™è¿‡å¿«é€Ÿå˜åŒ–
- âŒ ä¿¡å·æ£€æŸ¥æ—¶æ•°æ®å¯èƒ½è¿‡æ—¶ï¼ˆæœ€è€3å°æ—¶ï¼‰
- âŒ åˆ°æœŸå‘¨å¯èƒ½è·Ÿä¸ä¸Šå˜åŒ–

### ä¸åŒæ›´æ–°é¢‘ç‡å¯¹æ¯”

| æ›´æ–°é¢‘ç‡ | å»¶è¿Ÿ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|---------|------|------|------|----------|
| **å®æ—¶ï¼ˆæ¯æ¬¡è°ƒç”¨ï¼‰** | < 1ç§’ | æ•°æ®æœ€æ–° | APIè°ƒç”¨è¿‡å¤š | é«˜é¢‘äº¤æ˜“ |
| **æ¯15åˆ†é’Ÿ** | 0-15åˆ†é’Ÿ | å¹³è¡¡ | ä¸­ç­‰è´Ÿè½½ | æ´»è·ƒå¸‚åœº |
| **æ¯1å°æ—¶ï¼ˆå½“å‰ï¼‰** | 0-60åˆ†é’Ÿ | ä½è´Ÿè½½ | å¯èƒ½è¿‡æ—¶ | æ­£å¸¸å¸‚åœº |
| **æ¯4å°æ—¶** | 0-240åˆ†é’Ÿ | æä½è´Ÿè½½ | ä¸¥é‡è¿‡æ—¶ | âŒ ä¸æ¨è |

---

## ğŸ¯ æ¨èæ›´æ–°ç­–ç•¥

### æ–¹æ¡ˆ1: åˆ†å±‚æ›´æ–°ï¼ˆæ¨èï¼‰

**é€»è¾‘**: æ ¹æ®ä½¿ç”¨åœºæ™¯é‡‡ç”¨ä¸åŒé¢‘ç‡

```python
# ä¿¡å·æ£€æŸ¥æ—¶ï¼ˆæ¯4å°æ—¶ï¼‰: å®æ—¶è·å–
def check_signals_enhanced(self):
    self.fetch_options_data(force=True)  # å¼ºåˆ¶æ›´æ–°
    # ... ä¿¡å·åˆ†æ

# æŒä»“æ£€æŸ¥æ—¶ï¼ˆæ¯1å°æ—¶ï¼‰: ä½¿ç”¨ç¼“å­˜
def check_position(self):
    # ä¸æ›´æ–°æœŸæƒæ•°æ®ï¼Œç›´æ¥æ£€æŸ¥æŒä»“
    # ...
```

**ä¼˜ç‚¹**:
- âœ… ä¿¡å·å†³ç­–æ—¶ä½¿ç”¨æœ€æ–°æ•°æ®
- âœ… ä¸ä¼šè¿‡åº¦è°ƒç”¨API
- âœ… æœ€å¹³è¡¡çš„ç­–ç•¥

**å½±å“**:
- æ¯4å°æ—¶è°ƒç”¨1æ¬¡APIï¼ˆå¯æ¥å—ï¼‰
- ä¿¡å·å†³ç­–æœ€å‡†ç¡®

---

### æ–¹æ¡ˆ2: åŠ¨æ€æ›´æ–°ï¼ˆæ™ºèƒ½ï¼‰

**é€»è¾‘**: æ ¹æ®å¸‚åœºçŠ¶æ€åŠ¨æ€è°ƒæ•´é¢‘ç‡

```python
# åˆ°æœŸå‘¨ï¼šå¢åŠ æ›´æ–°é¢‘ç‡
# éåˆ°æœŸå‘¨ï¼šæ­£å¸¸é¢‘ç‡
# å¸‚åœºå‰§çƒˆæ³¢åŠ¨ï¼šå¢åŠ é¢‘ç‡

def should_update_frequently(self):
    # æ£€æŸ¥æ˜¯å¦æ˜¯åˆ°æœŸå‰1å‘¨
    if self.is_expiry_week():
        return True

    # æ£€æŸ¥å¸‚åœºæ³¢åŠ¨ç‡
    if self.iv percentile > 80:
        return True

    return False
```

**ä¼˜ç‚¹**:
- âœ… å…³é”®æ—¶æœŸé«˜é¢‘æ›´æ–°
- âœ… å¹³æ—¶ä½é¢‘èŠ‚çœèµ„æº
- âœ… æ™ºèƒ½é€‚åº”å¸‚åœº

---

### æ–¹æ¡ˆ3: å¢é‡æ›´æ–°ï¼ˆé«˜çº§ï¼‰

**é€»è¾‘**: åªæ›´æ–°é‡è¦çš„å¢™

```python
# åªå…³æ³¨å½“å‰ä»·æ ¼Â±10%èŒƒå›´å†…çš„å¢™
# è¿œç«¯çš„å¢™æ›´æ–°é¢‘ç‡ä½

relevant_walls = [w for w in walls if abs(w['strike'] - price) / price < 0.10]

# é‡è¦çš„å¢™æ¯15åˆ†é’Ÿæ›´æ–°
# å…¶ä»–å¢™æ¯1å°æ—¶æ›´æ–°
```

**ä¼˜ç‚¹**:
- âœ… èšç„¦å…³é”®æ•°æ®
- âœ… èŠ‚çœAPIè°ƒç”¨
- âœ… æ€§èƒ½æœ€ä¼˜

---

## ğŸ“Š å®é™…æ•°æ®å˜åŒ–æµ‹è¯•

### æµ‹è¯•æ–¹æ³•

è¿ç»­24å°æ—¶ç›‘æ§è®¢å•å¢™å˜åŒ–ï¼š

```python
# æµ‹è¯•è„šæœ¬
results = []
for i in range(24):  # 24å°æ—¶
    data = deribit.get_book_summary_by_currency("BTC")
    walls = identify_order_walls(data)

    results.append({
        'time': datetime.now(),
        'walls': walls
    })

    time.sleep(3600)  # 1å°æ—¶
```

### é¢„æœŸç»“æœ

**æ­£å¸¸å¸‚åœº**ï¼ˆ85%çš„æ—¶é—´ï¼‰:
- è®¢å•å¢™ä½ç½®å˜åŒ–: Â±2%ä»¥å†…
- OIæ•°é‡å˜åŒ–: Â±10%ä»¥å†…
- å¢™çš„æ’åå˜åŒ–: å‰5ä¸ªå¢™åŸºæœ¬ç¨³å®š

**æ´»è·ƒå¸‚åœº**ï¼ˆ10%çš„æ—¶é—´ï¼‰:
- è®¢å•å¢™ä½ç½®å˜åŒ–: Â±5%ä»¥å†…
- OIæ•°é‡å˜åŒ–: Â±20%ä»¥å†…
- å¢™çš„æ’åå˜åŒ–: å‰5ä¸ªå¢™å¯èƒ½å˜åŒ–1-2ä¸ª

**æç«¯å¸‚åœº**ï¼ˆ5%çš„æ—¶é—´ï¼‰:
- è®¢å•å¢™ä½ç½®å˜åŒ–: Â±10%ä»¥ä¸Š
- OIæ•°é‡å˜åŒ–: Â±30%ä»¥ä¸Š
- å¢™çš„æ’åå˜åŒ–: å‰5ä¸ªå¢™å¯èƒ½å¤§æ¢è¡€

---

## ğŸ’¡ å½“å‰å»ºè®®

### çŸ­æœŸï¼ˆç«‹å³å®æ–½ï¼‰

**æ”¹ä¸ºæ–¹æ¡ˆ1: ä¿¡å·æ£€æŸ¥æ—¶å®æ—¶æ›´æ–°**

```python
# main_v80_enhanced.py
def check_signals_enhanced(self):
    # 1. å¼ºåˆ¶è·å–æœ€æ–°æœŸæƒæ•°æ®
    options_success = self.fetch_options_data(force=True)  # â† æ”¹ä¸ºforce=True

    # 2. ä¿¡å·æ£€æŸ¥
    # ...

# ç§»é™¤æ¯å°æ—¶è‡ªåŠ¨æ›´æ–°
# åªåœ¨ä¿¡å·æ£€æŸ¥æ—¶æ›´æ–°
```

**å½±å“**:
- æ¯4å°æ—¶è°ƒç”¨1æ¬¡APIï¼ˆå¯æ¥å—ï¼‰
- ä¿¡å·å†³ç­–æ—¶æ•°æ®æœ€æ–°ï¼ˆ< 5ç§’å»¶è¿Ÿï¼‰
- å…¶ä»–æ—¶é—´ä¸è°ƒç”¨APIï¼ˆèŠ‚çœèµ„æºï¼‰

---

### ä¸­æœŸï¼ˆä¼˜åŒ–ï¼‰

**å®æ–½æ–¹æ¡ˆ2: åŠ¨æ€æ›´æ–°**

- åˆ°æœŸå‘¨ï¼ˆæ¯3ä¸ªæœˆ1æ¬¡ï¼‰: æ¯15åˆ†é’Ÿæ›´æ–°
- å¹³æ—¶: æ¯1å°æ—¶æ›´æ–°
- æ³¢åŠ¨ç‡>80%: æ¯15åˆ†é’Ÿæ›´æ–°

---

### é•¿æœŸï¼ˆé«˜çº§ï¼‰

**å®æ–½WebSocketå®æ—¶è®¢é˜…**

```python
# Deribitæä¾›WebSocket API
# å¯ä»¥å®æ—¶è®¢é˜…OIå˜åŒ–

ws.subscribe("deribit_price_index.btc_usd")
ws.subscribe("deribit.volatility.btc_usd")

# æ”¶åˆ°å˜åŒ–æ—¶ç«‹å³æ›´æ–°
def on_oi_change(message):
    update_options_data()
```

**ä¼˜ç‚¹**:
- âœ… çœŸæ­£å®æ—¶ï¼ˆ< 100mså»¶è¿Ÿï¼‰
- âœ… ä¸éœ€è¦è½®è¯¢
- âœ… æœ€èŠ‚çœèµ„æº

**ç¼ºç‚¹**:
- âŒ å®ç°å¤æ‚
- âŒ éœ€è¦ä¿æŒè¿æ¥
- âŒ å¯èƒ½ä¸ç¨³å®š

---

## ğŸ¯ å¿«é€Ÿå›ç­”ä½ çš„é—®é¢˜

### Q: è®¢å•å¢™æ¥å£æ˜¯å®æ—¶æ•°æ®å—ï¼Ÿ

**A: æ˜¯çš„ï¼ŒDeribit APIè¿”å›å®æ—¶æ•°æ®**

- âœ… APIæœ¬èº«æ˜¯å®æ—¶çš„ï¼ˆæ¯æ¬¡è°ƒç”¨éƒ½è¿”å›æœ€æ–°ï¼‰
- âŒ ä½†å½“å‰ç³»ç»Ÿ**æ¯å°æ—¶æ‰æ›´æ–°ä¸€æ¬¡**
- âš ï¸ æ‰€ä»¥æ•°æ®å¯èƒ½æ˜¯1å°æ—¶å‰çš„

### Q: å½“å‰æ•°æ®å»¶è¿Ÿæ˜¯å¤šå°‘ï¼Ÿ

**A: å–å†³äºä¸Šæ¬¡æ›´æ–°æ—¶é—´**

- æœ€å¥½æƒ…å†µ: åˆšæ›´æ–°è¿‡ï¼Œå»¶è¿Ÿ < 5ç§’
- æœ€åæƒ…å†µ: 3å°æ—¶æœªæ›´æ–°ï¼Œå»¶è¿Ÿ = 3å°æ—¶
- å¹³å‡æƒ…å†µ: çº¦30åˆ†é’Ÿå»¶è¿Ÿ

### Q: éœ€è¦æ”¹ä¸ºå®æ—¶å—ï¼Ÿ

**A: å»ºè®®æ”¹ä¸º"ä¿¡å·æ£€æŸ¥æ—¶å®æ—¶æ›´æ–°"**

- å½“å‰: æ¯4å°æ—¶ä¿¡å·æ£€æŸ¥ï¼Œä½†æ•°æ®å¯èƒ½1å°æ—¶å‰
- å»ºè®®: ä¿¡å·æ£€æŸ¥æ—¶å¼ºåˆ¶æ›´æ–°ï¼Œç¡®ä¿æ•°æ®æœ€æ–°
- å½±å“: æ¯4å°æ—¶å¤šè°ƒç”¨1æ¬¡APIï¼ˆå¯å¿½ç•¥ï¼‰

### Q: æœŸæƒå¸‚åœºå˜åŒ–å¿«å—ï¼Ÿ

**A: å¤§éƒ¨åˆ†æ—¶å€™ä¸å¿«ï¼Œä½†å…³é”®æ—¶åˆ»å¾ˆå¿«**

- 85%æ—¶é—´: è®¢å•å¢™ç¨³å®šï¼Œ1å°æ—¶æ›´æ–°è¶³å¤Ÿ
- 10%æ—¶é—´: å¸‚åœºæ´»è·ƒï¼Œéœ€è¦15åˆ†é’Ÿæ›´æ–°
- 5%æ—¶é—´: æç«¯æ³¢åŠ¨ï¼Œéœ€è¦å®æ—¶æ›´æ–°

---

## ğŸ”§ ç«‹å³ä¿®æ”¹å»ºè®®

### ä¿®æ”¹1: ä¿¡å·æ£€æŸ¥æ—¶å¼ºåˆ¶æ›´æ–°

```python
# main_v80_enhanced.py Line 119
# æ”¹ä¸º
options_success = self.fetch_options_data(force=True)  # â† å¼ºåˆ¶æ›´æ–°
```

### ä¿®æ”¹2: ç§»é™¤æ¯å°æ—¶è‡ªåŠ¨æ›´æ–°ï¼ˆå¯é€‰ï¼‰

```python
# main_v80_enhanced.py Line 209-213
# å¯ä»¥æ³¨é‡Šæ‰æ¯å°æ—¶æ›´æ–°ï¼Œåªåœ¨ä¿¡å·æ£€æŸ¥æ—¶æ›´æ–°
```

### ä¿®æ”¹3: æ·»åŠ æ—¶é—´æˆ³æç¤º

```python
# åœ¨Telegramé€šçŸ¥ä¸­æ˜¾ç¤ºæ•°æ®æ—¶é—´
message += f"\nâ° æœŸæƒæ•°æ®: {self.last_options_update.strftime('%H:%M')}"
```

---

## âœ… æ€»ç»“

| é¡¹ç›® | å½“å‰çŠ¶æ€ | å»ºè®®çŠ¶æ€ |
|------|---------|---------|
| APIå®æ—¶æ€§ | âœ… å®æ—¶API | ä¿æŒ |
| æ›´æ–°é¢‘ç‡ | 1å°æ—¶ | ä¿¡å·æ£€æŸ¥æ—¶ï¼ˆ4å°æ—¶ï¼‰ |
| æ•°æ®å»¶è¿Ÿ | 0-60åˆ†é’Ÿ | 0-5ç§’ï¼ˆå†³ç­–æ—¶ï¼‰ |
| APIè°ƒç”¨æ¬¡æ•° | æ¯å¤©24æ¬¡ | æ¯å¤©6æ¬¡ |
| å‡†ç¡®æ€§ | ä¸­ç­‰ | é«˜ |

**å…³é”®æ”¹è¿›**: ä¿¡å·å†³ç­–æ—¶ä½¿ç”¨å®æ—¶æ•°æ®ï¼Œç¡®ä¿å†³ç­–å‡†ç¡®æ€§ï¼

---

éœ€è¦æˆ‘ç«‹å³ä¿®æ”¹ä»£ç å—ï¼Ÿ
